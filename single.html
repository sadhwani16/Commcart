<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CommCart - Social Shopping</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #ff5f5f;
            --secondary: #4a4a4a;
            --light-gray: #f3f3f3;
            --success: #4caf50;
            --warning: #ffc107;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
        }
        
        #header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 80px;
            background-color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
            position: sticky;
            top: 0;
            left: 0;
            z-index: 999;
        }
        
        #header h2 {
            color: var(--primary);
            text-decoration: none;
            font-size: 28px;
            font-weight: 700;
        }
        
        #navbar {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #navbar li {
            list-style: none;
            padding: 0 20px;
            position: relative;
        }
        
        #navbar li a {
            text-decoration: none;
            font-size: 16px;
            font-weight: 600;
            color: var(--secondary);
            transition: 0.3s ease;
        }
        
        #navbar li a:hover,
        #navbar li a.active {
            color: var(--primary);
        }
        
        #navbar li a.active::after,
        #navbar li a:hover::after {
            content: "";
            width: 30%;
            height: 2px;
            background: var(--primary);
            position: absolute;
            bottom: -4px;
            left: 20px;
        }
        
        #mobile {
            display: none;
            align-items: center;
        }
        
        #close {
            display: none;
        }
        
        .section-p1 {
            padding: 40px 80px;
        }
        
        .section-m1 {
            margin: 40px 0;
        }
        
        .normal {
            font-size: 14px;
            font-weight: 600;
            padding: 15px 30px;
            color: black;
            background-color: white;
            border-radius: 4px;
            cursor: pointer;
            border: 1px solid #e3e3e3;
            outline: none;
            transition: 0.2s;
            margin: 10px 0;
        }
        
        .normal:hover {
            background-color: var(--primary);
            color: white;
        }
        
        /* Product Details */
        #prodetails {
            display: flex;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .single-pro-image {
            width: 40%;
            margin-right: 50px;
        }
        
        .small-img-group {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .small-img-col {
            flex-basis: 24%;
            cursor: pointer;
        }
        
        .single-pro-details {
            width: 50%;
            padding-top: 30px;
        }
        
        .single-pro-details h6 {
            font-size: 16px;
            color: #777;
            margin-bottom: 15px;
        }
        
        .single-pro-details h2 {
            font-size: 26px;
            margin-bottom: 10px;
            color: var(--secondary);
        }
        
        .single-pro-details select {
            display: block;
            padding: 10px 15px;
            margin-bottom: 15px;
            border: 1px solid #e3e3e3;
            border-radius: 4px;
            width: 200px;
        }
        
        .single-pro-details input {
            width: 80px;
            height: 47px;
            padding-left: 10px;
            font-size: 16px;
            margin-right: 10px;
            border: 1px solid #e3e3e3;
            border-radius: 4px;
        }
        
        .single-pro-details input:focus {
            outline: none;
        }
        
        .single-pro-details h4 {
            padding: 40px 0 20px 0;
            font-size: 20px;
        }
        
        .single-pro-details span {
            line-height: 25px;
            color: #666;
        }
        
        /* Social Group Shopping Section */
        .social-shopping {
            background-color: #fff;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-left: 4px solid var(--primary);
        }
        
        .social-shopping h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .social-shopping h3 i {
            margin-right: 10px;
            color: var(--primary);
        }
        
        .price-container {
            display: flex;
            align-items: center;
            margin: 15px 0;
        }
        
        .original-price {
            font-size: 18px;
            text-decoration: line-through;
            color: #999;
            margin-right: 15px;
        }
        
        .group-price {
            font-size: 24px;
            font-weight: bold;
            color: var(--success);
        }
        
        #progressBarContainer {
            margin: 15px 0;
            width: 100%;
            background-color: var(--light-gray);
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        #progressBar {
            height: 100%;
            width: 0;
            background: linear-gradient(to right, var(--success), var(--primary));
            border-radius: 10px;
            transition: width 0.5s ease-in-out;
        }
        
        .group-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .group-members {
            font-size: 14px;
        }
        
        #liveTimer {
            font-size: 14px;
            color: var(--secondary);
            margin-bottom: 15px;
        }
        
        .action-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .action-button {
            padding: 12px 20px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            outline: none;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 120px;
            text-align: center;
        }
        
        .join-btn {
            background-color: var(--success);
            color: white;
        }
        
        .join-btn:hover {
            background-color: #3d9640;
        }
        
        .unjoin-btn {
            background-color: #f44336;
            color: white;
        }
        
        .unjoin-btn:hover {
            background-color: #d32f2f;
        }
        
        .cart-btn {
            background-color: var(--primary);
            color: white;
        }
        
        .cart-btn:hover {
            background-color: #e54545;
        }
        
        .buy-btn {
            background-color: var(--secondary);
            color: white;
        }
        
        .buy-btn:hover {
            background-color: #333;
        }
        
        .share-section {
            margin: 20px 0;
            padding: 15px 0;
            border-top: 1px solid #eee;
            border-bottom: 1px solid #eee;
        }
        
        .share-section h4 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .share-options {
            display: flex;
            gap: 15px;
        }
        
        .share-option {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            background-color: var(--light-gray);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .share-option:hover {
            background-color: #e6e6e6;
        }
        
        .share-option i {
            margin-right: 5px;
            color: var(--secondary);
        }
        
        /* Live Feed */
        .live-feed {
            margin: 20px 0;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .live-feed h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .live-feed h3 i {
            margin-right: 10px;
            color: #f44336;
        }
        
        .feed-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .feed-item img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        
        .feed-content {
            flex: 1;
        }
        
        .feed-content p {
            margin: 0;
            font-size: 14px;
        }
        
        .feed-content .time {
            font-size: 12px;
            color: #999;
        }
        
        .feed-action {
            color: var(--primary);
            cursor: pointer;
            font-size: 14px;
        }
        
        /* Similar Products */
        #product1 {
            text-align: center;
            padding: 40px 0;
        }
        
        #product1 .pro-container {
            display: flex;
            justify-content: space-between;
            padding-top: 20px;
            flex-wrap: wrap;
        }
        
        #product1 .pro {
            width: 23%;
            min-width: 250px;
            padding: 10px 12px;
            border: 1px solid #e3e3e3;
            border-radius: 25px;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.02);
            margin: 15px 0;
            transition: 0.2s ease;
            position: relative;
            background-color: white;
        }
        
        #product1 .pro:hover {
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.1);
        }
        
        #product1 .pro img {
            width: 100%;
            border-radius: 20px;
        }
        
        #product1 .pro .des {
            text-align: start;
            padding: 10px 0;
        }
        
        #product1 .pro .des span {
            color: #606063;
            font-size: 12px;
        }
        
        #product1 .pro .des h5 {
            padding-top: 7px;
            color: #1a1a1a;
            font-size: 14px;
        }
        
        #product1 .pro .des i {
            font-size: 12px;
            color: #f6b73c;
        }
        
        #product1 .pro .des h4 {
            padding-top: 7px;
            font-size: 15px;
            font-weight: 700;
            color: var(--primary);
        }
        
        #product1 .pro .cart {
            width: 40px;
            height: 40px;
            line-height: 40px;
            border-radius: 50px;
            background-color: #e8f6ea;
            color: var(--success);
            border: 1px solid #e3e3e3;
            position: absolute;
            bottom: 20px;
            right: 10px;
        }
        
        /* Footer */
        footer {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            background-color: #222;
            color: white;
            padding: 60px 80px;
        }
        
        footer .col {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            margin-bottom: 20px;
        }
        
        footer .logo {
            margin-bottom: 30px;
        }
        
        footer h4 {
            font-size: 14px;
            padding-bottom: 20px;
        }
        
        footer p {
            font-size: 13px;
            margin: 0 0 8px 0;
        }
        
        footer a {
            font-size: 13px;
            text-decoration: none;
            color: #ccc;
            margin-bottom: 10px;
        }
        
        footer .follow {
            margin-top: 20px;
        }
        
        footer .follow i {
            color: #ccc;
            padding-right: 4px;
            cursor: pointer;
        }
        
        footer .follow i:hover,
        footer a:hover {
            color: var(--primary);
        }
        
        footer .copyright {
            width: 100%;
            text-align: center;
            margin-top: 20px;
        }
        
        /* Community panel */
        .community-panel {
            margin: 20px 0;
            padding: 15px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .community-panel h3 {
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }
        
        .community-panel h3 i {
            margin-right: 10px;
            color: var(--primary);
        }
        
        .member-avatars {
            display: flex;
            margin-bottom: 15px;
        }
        
        .member-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 2px solid white;
            margin-right: -10px;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #666;
        }
        
        .create-group {
            margin-top: 10px;
        }
        
        /* Media Queries */
        @media (max-width: 799px) {
            .section-p1 {
                padding: 40px;
            }
            #navbar {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                justify-content: flex-start;
                position: fixed;
                top: 0;
                right: -300px;
                height: 100vh;
                width: 300px;
                background-color: #fff;
                box-shadow: 0 40px 60px rgba(0, 0, 0, 0.1);
                padding: 80px 0 0 10px;
                transition: 0.3s;
            }
            #navbar.active {
                right: 0px;
            }
            #navbar li {
                margin-bottom: 25px;
            }
            #mobile {
                display: flex;
                align-items: center;
            }
            #mobile i {
                color: var(--secondary);
                font-size: 24px;
                padding-left: 20px;
            }
            #close {
                display: initial;
                position: absolute;
                top: 30px;
                left: 30px;
                color: var(--secondary);
                font-size: 24px;
            }
            #prodetails {
                flex-direction: column;
            }
            .single-pro-image {
                width: 100%;
                margin-right: 0px;
            }
            .single-pro-details {
                width: 100%;
            }
        }
        
        @media (max-width: 477px) {
            .section-p1 {
                padding: 20px;
            }
            #header {
                padding: 10px 30px;
            }
            #prodetails {
                flex-direction: column;
            }
            .single-pro-image {
                width: 100%;
                margin-right: 0px;
            }
            .single-pro-details {
                width: 100%;
            }
            #product1 .pro {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <section id="header">
        <a href="index.html"><h2>CommCart</h2></a>

        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a class="active" href="shop.html">Shop</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="fa fa-shopping-cart"></i></a></li>
                <a href="#" id="close"><i class="fa fa-times"></i></a>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="fa fa-shopping-cart"></i></a>
            <i id="bar" class="fa fa-outdent"></i>
        </div>
    </section>

    <section id="prodetails" class="section-p1">
        <!-- Product Image Section -->
        <div class="single-pro-image">
            <img src="/api/placeholder/400/320" width="100%" id="mainimg" alt="IITM T-shirt">

            <div class="small-img-group">
                <div class="small-img-col">
                    <img src="/api/placeholder/80/80" width="100%" class="small-img" alt="T-shirt view 1">
                </div>
                <div class="small-img-col">
                    <img src="/api/placeholder/80/80" width="100%" class="small-img" alt="T-shirt view 2">
                </div>
                <div class="small-img-col">
                    <img src="/api/placeholder/80/80" width="100%" class="small-img" alt="T-shirt view 3">
                </div>
                <div class="small-img-col">
                    <img src="/api/placeholder/80/80" width="100%" class="small-img" alt="T-shirt view 4">
                </div>
            </div>
        </div>

        <!-- Product Details Section -->
        <div class="single-pro-details">
            <h6>Home / T-shirts</h6>
            <h2>IITM Pride T-shirt</h2>

            <!-- Social Group Shopping Section -->
            <div class="social-shopping">
                <h3><i class="fas fa-users"></i> Community Group Shopping</h3>
                
                <div class="price-container">
                    <div class="original-price">₹400</div>
                    <div class="group-price">₹<span id="currentPrice">310</span></div>
                </div>
                
                <div class="group-status">
                    <div class="group-members"><span id="memberCount">0</span> of 30 members joined</div>
                    <div id="liveTimer">Time left: 23:45:10</div>
                </div>
                
                <div id="progressBarContainer">
                    <div id="progressBar"></div>
                </div>
                
                <div class="action-buttons">
                    <button class="action-button join-btn" id="joinNow" onclick="joinNow()">
                        <i class="fas fa-user-plus"></i> Join Group
                    </button>
                    <button class="action-button unjoin-btn" id="unjoinNow" onclick="unjoinNow()">
                        <i class="fas fa-user-minus"></i> Leave
                    </button>
                </div>
                
                <p id="joinMessage">Join the group to unlock the discounted price!</p>
            </div>
            
            <!-- Product Options -->
            <select id="designSelect">
                <option value="" disabled selected>Select Design</option>
                <option value="white">White IITM</option>
                <option value="green">Green IITM</option>
                <option value="minimal">Contrast Minimal</option>
                <option value="flame">Entrepreneurial Flame</option>
            </select>
            
            <select id="sizeSelect">
                <option value="" disabled selected>Select Size</option>
                <option value="S">S</option>
                <option value="M">M</option>
                <option value="L">L</option>
                <option value="XL">XL</option>
                <option value="XXL">XXL</option>
            </select>
            
            <div style="display: flex; align-items: center; margin: 15px 0;">
                <span style="margin-right: 10px;">Quantity:</span>
                <input type="number" id="quantity" value="1" min="1">
            </div>
            
            <div class="action-buttons">
                <button class="action-button cart-btn" onclick="addToCart()">
                    <i class="fas fa-cart-plus"></i> Add To Cart
                </button>
                <button class="action-button buy-btn" onclick="buyNow()">
                    <i class="fas fa-bolt"></i> Buy Now
                </button>
            </div>
            
            <!-- Share Section -->
            <div class="share-section">
                <h4>Share with friends</h4>
                <div class="share-options">
                    <div class="share-option" onclick="shareProduct('whatsapp')">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </div>
                    <div class="share-option" onclick="shareProduct('facebook')">
                        <i class="fab fa-facebook"></i> Facebook
                    </div>
                    <div class="share-option" onclick="shareProduct('twitter')">
                        <i class="fab fa-twitter"></i> Twitter
                    </div>
                </div>
            </div>
            
            <!-- Community Panel -->
            <div class="community-panel">
                <h3><i class="fas fa-comments"></i> Shopping Group</h3>
                <div class="member-avatars">
                    <div class="member-avatar">AK</div>
                    <div class="member-avatar">SR</div>
                    <div class="member-avatar">PK</div>
                    <div class="member-avatar">+<span id="moreMembers">0</span></div>
                </div>
                <button class="normal create-group" onclick="createNewGroup()">Create New Group</button>
            </div>
            
            <h4>Product Description</h4>
            <span>Show your pride with our exclusive IITM T-shirt! Made from premium cotton, this comfortable and stylish t-shirt features the iconic IITM logo. Perfect for alumni, students, and supporters alike. The breathable fabric ensures comfort throughout the day, while the durable print maintains its vibrant look even after multiple washes. Available in various designs and colors to match your style.</span>
        </div>
    </section>

    <!-- Live Feed Section -->
    <section class="section-p1 live-feed">
        <h3><i class="fas fa-broadcast-tower"></i> Live Activity</h3>
        <div class="feed-item">
            <img src="/api/placeholder/40/40" alt="User">
            <div class="feed-content">
                <p><strong>Rahul S.</strong> just joined this group</p>
                <p class="time">2 minutes ago</p>
            </div>
            <div class="feed-action">Say Hi</div>
        </div>
        <div class="feed-item">
            <img src="/api/placeholder/40/40" alt="User">
            <div class="feed-content">
                <p><strong>Priya K.</strong> purchased this item</p>
                <p class="time">15 minutes ago</p>
            </div>
        </div>
        <div class="feed-item">
            <img src="/api/placeholder/40/40" alt="User">
            <div class="feed-content">
                <p><strong>Amit R.</strong> created a new group</p>
                <p class="time">43 minutes ago</p>
            </div>
            <div class="feed-action">Join</div>
        </div>
    </section>

    <!-- New Arrivals -->
    <section id="product1" class="section-p1">
        <h2>Similar Products</h2>
        <p>Community favorites with special prices</p>
        <div class="pro-container">
            <div class="pro">
                <img src="/api/placeholder/250/250" alt="College Hoodie">
                <div class="des">
                    <span>Campus Collection</span>
                    <h5>IITM Hoodie</h5>
                    <div class="star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <h4>₹899</h4>
                </div>
                <a href="#"><i class="fas fa-shopping-cart cart"></i></a>
            </div>

            <div class="pro">
                <img src="/api/placeholder/250/250" alt="Campus Cap">
                <div class="des">
                    <span>Campus Collection</span>
                    <h5>IITM Cap</h5>
                    <div class="star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <h4>₹299</h4>
                </div>
                <a href="#"><i class="fas fa-shopping-cart cart"></i></a>
            </div>

            <div class="pro">
                <img src="/api/placeholder/250/250" alt="IITM Mug">
                <div class="des">
                    <span>Campus Collection</span>
                    <h5>IITM Coffee Mug</h5>
                    <div class="star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </div>
                    <h4>₹249</h4>
                </div>
                <a href="#"><i class="fas fa-shopping-cart cart"></i></a>
            </div>

            <div class="pro">
                <img src="/api/placeholder/250/250" alt="IITM Badge Set">
                <div class="des">
                    <span>Campus Collection</span>
                    <h5>IITM Badge Set</h5>
                    <div class="star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                        <i class="far fa-star"></i>
                    </div>
                    <h4>₹199</h4>
                </div>
                <a href="#"><i class="fas fa-shopping-cart cart"></i></a>
            </div>
        </div>
    </section>

    <!-- Newsletter -->
    <section id="newsletter" class="section-p1 section-m1">
        <div class="newstext">
            <h4>Join Our Community</h4>
            <p>Get updates on new products and <span>exclusive community discounts</span></p>
        </div>
        <div class="form">
            <input type="text" placeholder="Enter your email">
            <button class="normal">Sign Up</button>
        </div>
    </section>

    <!-- Footer -->
    <footer class="section-p1">
        <div class="col">
            <h2 style="color: #ff5f5f; margin-bottom: 30px;">CommCart</h2>
            <h4>Contact</h4>
            <p><strong>Address:</strong> Indian Institute of Technology Madras, Chennai 600036</p>
            <p><strong>Phone:</strong> +91 9826591325</p>
            <p><strong>Hours:</strong> 24/7, Mon - Sun</p>
            <div class="follow">
                <h4>Follow Us</h4>
                <div class="icon">
                    <i class="fab fa-facebook"></i>
                    <i class="fab fa-twitter"></i>
                    <i class="fab fa-instagram"></i>
                    <i class="fab fa-pinterest"></i>
                    <i class="fab fa-youtube"></i>
                </div>
            </div>
        </div>

        <div class="col">
            <h4>About</h4>
            <a href="#">About Us</a>
            <a href="#">Delivery Information</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms & Conditions</a>
            <a href="#">Contact Us</a>
        </div>

        <div class="col">
            <h4>My Account</h4>
            <a href="#">Sign In</a>
            <a href="#">View Cart</a>
            <a href="#">My Wishlist</a>
            <a href="#">Track My Order</a>
            <a href="#">Help</a>
        </div>

        <div class="col">
            <h4>Install App</h4>
            <p>From App Store or Google Play Store</p>
            <div class="row">
                <img src="/api/placeholder/120/40" alt="App Store">
                <img src="/api/placeholder/120/40" alt="Play Store">
            </div>
            <p>Secured Payment Gateways</p>
            <img src="/api/placeholder/250/30" alt="Payment Methods">
        </div>

        <div class="copyright">
            <p>© 2025, CommCart.com, Inc. or its affiliates</p>
        </div>
    </footer>

    <script>
        // Base price and minimum price
        const basePrice = 400;  // Base price when joinCount is 0
        const minPrice = 310;   // Minimum price cap
        let joinCount = localStorage.getItem('joinCount') ? parseInt(localStorage.getItem('joinCount')) : 0;
        const maxJoin = 30;
        
        // Update UI on load
        document.addEventListener("DOMContentLoaded", function() {
            updateUI();
            startCountdown();
            updateLiveTimer();
            
            // Event listeners for image gallery
            const smallImages = document.querySelectorAll('.small-img');
            smallImages.forEach(img => {
                img.addEventListener('click', function() {
                    document.getElementById('mainimg').src = this.src;
                });
            });
        });
        
        // Calculate price based on join count
        function calculatePrice() {
            let price = basePrice - ((basePrice - minPrice) * (joinCount / maxJoin));
            return Math.max(Math.round(price), minPrice);
        }
        
        // Join group function
        function joinNow() {
            if (joinCount < maxJoin) {
                joinCount++;
                localStorage.setItem('joinCount', joinCount);
                
                // Show success message with animation
                const joinMessage = document.getElementById("joinMessage");
                joinMessage.textContent = `You've joined the group! Current price: ₹${calculatePrice()}`;
                joinMessage.style.color = "#4caf50";
                
                updateUI();
                
                // Simulate social activity
                setTimeout(() => {
                    addLiveActivity("You", "joined this group", "just now");
                }, 500);
            } else {
                document.getElementById("joinMessage").textContent = "Maximum group size reached!";
            }
        }
        
        // Leave group function
        function unjoinNow() {
            if (joinCount > 0) {
                joinCount--;
                localStorage.setItem('joinCount', joinCount);
                
                const joinMessage = document.getElementById("joinMessage");
                joinMessage.textContent = `You've left the group. Current price: ₹${calculatePrice()}`;
                joinMessage.style.color = "#f44336";
                
                updateUI();
            } else {
                document.getElementById("joinMessage").textContent = "You haven't joined any group yet!";
            }
        }
        
        // Update all UI elements
        function updateUI() {
            // Update member count
            document.getElementById("memberCount").textContent = joinCount;
            document.getElementById("moreMembers").textContent = Math.max(0, joinCount - 3);
            
            // Update progress bar
            let progressBar = document.getElementById("progressBar");
            let percentage = (joinCount / maxJoin) * 100;
            progressBar.style.width = percentage + "%";
            
            // Update price display
            document.getElementById("currentPrice").textContent = calculatePrice();
        }
        
        // Add to cart functionality
        function addToCart() {
            const design = document.getElementById("designSelect").value;
            const size = document.getElementById("sizeSelect").value;
            const quantity = document.getElementById("quantity").value;
            
            if (!design || !size) {
                alert("Please select both design and size before adding to cart!");
                return;
            }
            
            const product = {
                name: "IITM Pride T-shirt",
                design: design,
                size: size,
                quantity: parseInt(quantity),
                price: calculatePrice(),
                image: document.getElementById("mainimg").src
            };
            
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            cart.push(product);
            localStorage.setItem("cart", JSON.stringify(cart));
            
            // Show confirmation with animation
            const notification = document.createElement("div");
            notification.textContent = "Added to cart!";
            notification.style.position = "fixed";
            notification.style.top = "20px";
            notification.style.right = "20px";
            notification.style.backgroundColor = "#4caf50";
            notification.style.color = "white";
            notification.style.padding = "15px 20px";
            notification.style.borderRadius = "4px";
            notification.style.zIndex = "1000";
            notification.style.opacity = "0";
            notification.style.transition = "opacity 0.3s ease";
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = "1";
            }, 10);
            
            setTimeout(() => {
                notification.style.opacity = "0";
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 2000);
            
            // Add to live activity
            addLiveActivity("You", "added this item to cart", "just now");
        }
        
        // Buy now functionality
        function buyNow() {
            const design = document.getElementById("designSelect").value;
            const size = document.getElementById("sizeSelect").value;
            
            if (!design || !size) {
                alert("Please select both design and size before proceeding!");
                return;
            }
            
            // Redirect to checkout page
            window.location.href = "checkout.html";
        }
        
        // Share product functionality
        function shareProduct(platform) {
            const productUrl = window.location.href;
            const productName = "IITM Pride T-shirt";
            const message = `Check out this ${productName} on CommCart! Join our group to get it for just ₹${calculatePrice()}`;
            
            let shareUrl = "";
            
            switch(platform) {
                case 'whatsapp':
                    shareUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent(message + ' ' + productUrl)}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(productUrl)}&quote=${encodeURIComponent(message)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}&url=${encodeURIComponent(productUrl)}`;
                    break;
                default:
                    shareUrl = productUrl;
            }
            
            window.open(shareUrl, '_blank');
            
            // Add to live activity
            addLiveActivity("You", "shared this product", "just now");
        }
        
        // Create new group functionality
        function createNewGroup() {
            // Reset join count for new group
            joinCount = 1; // Start with user as first member
            localStorage.setItem('joinCount', joinCount);
            
            const joinMessage = document.getElementById("joinMessage");
            joinMessage.textContent = "New group created! Share with friends to get better prices.";
            joinMessage.style.color = "#ff5f5f";
            
            updateUI();
            
            // Add to live activity
            addLiveActivity("You", "created a new group", "just now");
        }
        
        // Countdown timer
        function startCountdown() {
            // Set countdown for 24 hours from now
            const countDownDate = new Date().getTime() + (24 * 60 * 60 * 1000);
            
            const timerElement = document.getElementById("liveTimer");
            
            // Update the countdown every 1 second
            const countdown = setInterval(function() {
                const now = new Date().getTime();
                const distance = countDownDate - now;
                
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);
                
                timerElement.innerHTML = `Time left: ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (distance < 0) {
                    clearInterval(countdown);
                    timerElement.innerHTML = "Offer expired!";
                }
            }, 1000);
        }
        
        // Add live activity to feed
        function addLiveActivity(user, action, time) {
            const feedContainer = document.querySelector('.live-feed');
            const feedItem = document.createElement('div');
            feedItem.className = 'feed-item';
            
            feedItem.innerHTML = `
                <img src="/api/placeholder/40/40" alt="User">
                <div class="feed-content">
                    <p><strong>${user}</strong> ${action}</p>
                    <p class="time">${time}</p>
                </div>
            `;
            
            // Insert new activity at the top
            const firstItem = feedContainer.querySelector('.feed-item');
            feedContainer.insertBefore(feedItem, firstItem);
            
            // Animate entry
            feedItem.style.opacity = "0";
            feedItem.style.transform = "translateY(-10px)";
            feedItem.style.transition = "all 0.3s ease";
            
            setTimeout(() => {
                feedItem.style.opacity = "1";
                feedItem.style.transform = "translateY(0)";
            }, 10);
        }
        
        // Update live time display
        function updateLiveTimer() {
            setInterval(() => {
                const now = new Date();
                const hours = String(now.getHours()).padStart(2, '0');
                const minutes = String(now.getMinutes()).padStart(2, '0');
                const seconds = String(now.getSeconds()).padStart(2, '0');
                
                // Display current server time (not used in UI but can be used for debugging)
                // console.log(`Server time: ${hours}:${minutes}:${seconds}`);
            }, 1000);
        }
        
        // Mobile navigation toggle
        document.getElementById('bar').addEventListener('click', function() {
            document.getElementById('navbar').classList.add('active');
        });
        
        document.getElementById('close').addEventListener('click', function() {
            document.getElementById('navbar').classList.remove('active');
        });
    </script>
</body>

</html>